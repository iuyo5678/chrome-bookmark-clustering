(lp0
S'http://www.emacswiki.org/emacs/FlyMake'
p1
aS'EmacsWiki: Fly Make'
p2
aI0
aV<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\u000a<html xmlns="http://www.w3.org/1999/xhtml"><head><title>EmacsWiki: Fly Make</title><link rel="alternate" type="application/wiki" title="Edit this page" href="https://www.emacswiki.org/emacs?action=edit;id=FlyMake" /><link type="text/css" rel="stylesheet" href="https://www.emacswiki.org/light.css" /><meta name="robots" content="INDEX,FOLLOW" /><link rel="alternate" type="application/rss+xml" title="EmacsWiki" href="https://www.emacswiki.org/emacs?action=rss" /><link rel="alternate" type="application/rss+xml" title="EmacsWiki: FlyMake" href="https://www.emacswiki.org/emacs?action=rss;rcidonly=FlyMake" />\u000a<link rel="alternate" type="application/rss+xml"\u000a      title="Emacs Wiki with page content"\u000a      href="https://www.emacswiki.org/full.rss" />\u000a<link rel="alternate" type="application/rss+xml"\u000a      title="Emacs Wiki with page content and diff"\u000a      href="https://www.emacswiki.org/full-diff.rss" />\u000a<link rel="alternate" type="application/rss+xml"\u000a      title="Emacs Wiki including minor differences"\u000a      href="https://www.emacswiki.org/minor-edits.rss" />\u000a<link rel="alternate" type="application/rss+xml"\u000a      title="Changes for FlyMake only"\u000a      href="https://www.emacswiki.org/emacs?action=rss;rcidonly=FlyMake" /><meta content="width=device-width" name="viewport" />\u000a<script type="text/javascript" src="/outliner.0.5.0.62-toc.js"></script>\u000a<script type="text/javascript">\u000a\u000a  function addOnloadEvent(fnc) {\u000a    if ( typeof window.addEventListener != "undefined" )\u000a      window.addEventListener( "load", fnc, false );\u000a    else if ( typeof window.attachEvent != "undefined" ) {\u000a      window.attachEvent( "onload", fnc );\u000a    }\u000a    else {\u000a      if ( window.onload != null ) {\u000a	var oldOnload = window.onload;\u000a	window.onload = function ( e ) {\u000a	  oldOnload( e );\u000a	  window[fnc]();\u000a	};\u000a      }\u000a      else\u000a	window.onload = fnc;\u000a    }\u000a  }\u000a\u000a  // https://stackoverflow.com/questions/280634/endswith-in-javascript\u000a  if (typeof String.prototype.endsWith !== 'function') {\u000a    String.prototype.endsWith = function(suffix) {\u000a      return this.indexOf(suffix, this.length - suffix.length) !== -1;\u000a    };\u000a  }\u000a\u000a  var initToc=function() {\u000a\u000a    var outline = HTML5Outline(document.body);\u000a    if (outline.sections.length == 1) {\u000a      outline.sections = outline.sections[0].sections;\u000a    }\u000a\u000a    if (outline.sections.length > 1\u000a	|| outline.sections.length == 1\u000a           && outline.sections[0].sections.length > 0) {\u000a\u000a      var toc = document.getElementById('toc');\u000a\u000a      if (!toc) {\u000a	var divs = document.getElementsByTagName('div');\u000a	for (var i = 0; i < divs.length; i++) {\u000a	  if (divs[i].getAttribute('class') == 'toc') {\u000a	    toc = divs[i];\u000a	    break;\u000a	  }\u000a	}\u000a      }\u000a\u000a      if (!toc) {\u000a	var h2 = document.getElementsByTagName('h2')[0];\u000a	if (h2) {\u000a	  toc = document.createElement('div');\u000a	  toc.setAttribute('class', 'toc');\u000a	  h2.parentNode.insertBefore(toc, h2);\u000a	}\u000a      }\u000a\u000a      if (toc) {\u000a        var html = outline.asHTML(true);\u000a        toc.innerHTML = html;\u000a\u000a	items = toc.getElementsByTagName('a');\u000a	for (var i = 0; i < items.length; i++) {\u000a	  while (items[i].textContent.endsWith('\u270e')) {\u000a            var text = items[i].childNodes[0].nodeValue;\u000a	    items[i].childNodes[0].nodeValue = text.substring(0, text.length - 1);\u000a	  }\u000a	}\u000a      }\u000a    }\u000a  }\u000a\u000a  addOnloadEvent(initToc);\u000a  </script>\u000a<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head><body class="default"><div class="header"><a class="logo" href="https://www.emacswiki.org/emacs/SiteMap"><img alt="[Home]" class="logo" src="https://www.emacswiki.org/images/logo218x38.png" /></a><div class="menu"><span class="gotobar bar"><a class="local" href="https://www.emacswiki.org/emacs/SiteMap">SiteMap</a> <a class="local" href="https://www.emacswiki.org/emacs/Search">Search</a> <a href="https://www.emacswiki.org/emacs/ElispArea" class="local">ElispArea</a> <a class="local" href="https://www.emacswiki.org/emacs/HowTo">HowTo</a> <a class="local" href="https://www.emacswiki.org/emacs/Glossary">Glossary</a> <a href="https://www.emacswiki.org/emacs/RecentChanges" class="local">RecentChanges</a> <a class="local" href="https://www.emacswiki.org/emacs/News">News</a> <a href="https://www.emacswiki.org/emacs/Problems" class="local">Problems</a> <a href="https://www.emacswiki.org/emacs/Suggestions" class="local">Suggestions</a> </span><form method="get" action="https://www.emacswiki.org/emacs" enctype="multipart/form-data" class="search" accept-charset="utf-8"><p><label for="search">Search:</label> <input type="text" name="search"  size="20" accesskey="f" id="search" /> <label for="searchlang">Language:</label> <input type="text" name="lang"  size="10" id="searchlang" /> <input type="submit" name="dosearch" value="Go!" /></p></form></div><h1><a title="Click to search for references to this page" rel="nofollow" href="https://www.emacswiki.org/emacs?search=%22FlyMake%22"><span style="padding-right: 0.5ex;">Fly</span><span style="padding-right: 0.5ex;">Make</span></a></h1></div><div class="wrapper"><div class="content browse"><p><a class="local" href="https://www.emacswiki.org/emacs/FlyMake">FlyMake</a> performs on-the-fly syntax checks on the files being edited using the external syntax check tool (usually the compiler). Highlights erroneous lines and displays associated error messages. Flymake is part of Emacs 23 and some of the tips below works out-of-the-box there.</p><ul><li><a href="http://flymake.sourceforge.net/" class="url http">http://flymake.sourceforge.net/</a></li></ul><p>Unfortunately, this project is outdated and last change was 3 years ago.</p><p>For a modern alternative, check out <a class="local" href="https://www.emacswiki.org/emacs/Flycheck">Flycheck</a></p><p>Currently new and improved version of Flymake is maintained by Sam Graham and available on github:</p><ul><li><a class="url http" href="https://github.com/illusori/emacs-flymake">https://github.com/illusori/emacs-flymake</a></li></ul><p>More info here:</p><ul><li><a href="http://www.illusori.co.uk/projects/emacs-flymake/" class="url http">http://www.illusori.co.uk/projects/emacs-flymake/</a></li></ul><p>From its home page:</p><dl class="quote"><dt /><dd>&#x201c;Flymake is implemented as an Emacs minor mode. It runs the syntax check tool in the background, passing it a temporary copy of the current buffer, and parses the output for known error/warning message patterns. Flymake then highlights erroneous lines (that is, lines for which at least one error or warning has been reported), and displays an overall buffer status in the mode line.&#x201d;</dd></dl><p>Flymake&#x2019;s author is <a href="https://www.emacswiki.org/emacs/PavelKobiakov" class="local">PavelKobiakov</a></p><h2>Language Support</h2><dl><dt>PHP</dt><dd><a class="local" href="https://www.emacswiki.org/emacs/FlymakePhp">FlymakePhp</a> for PHP</dd><dt>Ruby</dt><dd><a href="https://www.emacswiki.org/emacs/FlymakeRuby" class="local">FlymakeRuby</a> for Ruby</dd><dt>Fortran G95</dt><dd><a href="https://www.emacswiki.org/emacs/Flymake_Fortran_G95" class="local">Flymake Fortran G95</a></dd><dt>Javascript</dt><dd><a class="local" href="https://www.emacswiki.org/emacs/FlymakeJavaScript">FlymakeJavaScript</a> for <a href="https://www.emacswiki.org/emacs/JavaScript" class="local">JavaScript</a></dd><dt>Actionscript 3</dt><dd><a class="local" href="https://www.emacswiki.org/emacs/FlymakeActionscriptThree">FlymakeActionscriptThree</a> for Actionscript 3, more than just syntax checking; full incremental compilation</dd><dt>Haskell</dt><dd><a class="local" href="https://www.emacswiki.org/emacs/FlymakeHaskell">FlymakeHaskell</a> for Haskell</dd><dt>Erlang</dt><dd><a class="local" href="https://www.emacswiki.org/emacs/FlymakeErlang">FlymakeErlang</a> for Erlang</dd><dt>Lua</dt><dd><a href="https://www.emacswiki.org/emacs/FlymakeLua" class="local">FlymakeLua</a> for Lua</dd><dt>Shell</dt><dd><a href="https://www.emacswiki.org/emacs/FlymakeShell" class="local">FlymakeShell</a> for *nix shell programming (Bash)</dd><dt>Elisp</dt><dd><a href="https://www.emacswiki.org/emacs/FlymakeElisp" class="local">FlymakeElisp</a> for <a href="https://www.emacswiki.org/emacs/EmacsLisp" class="local">EmacsLisp</a></dd><dt>CSS</dt><dd><a href="https://www.emacswiki.org/emacs/FlymakeCSS" class="local">FlymakeCSS</a> for Cascading Style Sheets</dd><dt>Java</dt><dd><a class="local" href="https://www.emacswiki.org/emacs/FlymakeJava">FlymakeJava</a> with Make or JDEE</dd><dt>C#</dt><dd><a class="local" href="https://www.emacswiki.org/emacs/FlymakeCsharp">FlymakeCsharp</a> for C#</dd><dt>VB.NET</dt><dd>included in <a class="local" href="https://www.emacswiki.org/emacs/VbDotNetMode">VbDotNetMode</a></dd><dt>Python</dt><dd>See <a href="https://www.emacswiki.org/emacs/PythonMode" class="local">PythonMode</a></dd><dt>D</dt><dd><a href="https://www.emacswiki.org/emacs/FlyMakeD" class="local">FlyMakeD</a> for the D programming language.</dd><dt><a class="local" href="https://www.emacswiki.org/emacs/FlymakeTex">FlymakeTex</a></dt><dd><a href="https://www.emacswiki.org/emacs/TeX" class="local">TeX</a> and <a class="local" href="https://www.emacswiki.org/emacs/LaTeX">LaTeX</a></dd><dt><a href="https://www.emacswiki.org/emacs/FlymakeHtml" class="local">FlymakeHtml</a></dt><dd>HTML markup</dd></dl><h2>Hints And Questions</h2><h3>Long Checks</h3><p>Flymake doesn&#x2019;t interrupt itself if you change the buffer while it&#x2019;s checking. I use the following to get around it:</p><pre>  (<span class="keyword">defun</span> <span class="function">interrupting-flymake-start-syntax-check</span> (base-function)\u000a    (<span class="keyword cl">when</span> (and (boundp 'flymake-syntax-check-process) (process-live-p flymake-syntax-check-process))\u000a      (setq flymake-check-was-interrupted t)\u000a      (flymake-kill-process flymake-syntax-check-process))\u000a    (funcall base-function)\u000a    (<span class="keyword elisp">let</span> ((proc (car flymake-processes)))\u000a      (set-process-query-on-exit-flag proc nil)\u000a      (set (make-local-variable 'flymake-syntax-check-process) proc)\u000a      (setq flymake-check-was-interrupted t)\u000a      (setq flymake-is-running nil)))</pre><pre>  (advice-add 'flymake-start-syntax-check <span class="builtin">:around</span> #'interrupting-flymake-start-syntax-check)</pre><p>--<a class="local" href="https://www.emacswiki.org/emacs/DaveAbrahams">DaveAbrahams</a></p><h3>Ada</h3><p>The following works with Gnat:</p><pre>  <span class="comment">;; Flymake for Ada</span>\u000a  (<span class="keyword">require</span> '<span class="constant">flymake</span>)\u000a  (<span class="keyword">defun</span> <span class="function">flymake-ada-init</span> ()\u000a      (flymake-simple-make-init-impl\u000a        'flymake-create-temp-with-folder-structure nil nil\u000a        buffer-file-name\u000a        'flymake-get-ada-cmdline))</pre><pre>  (<span class="keyword">defun</span> <span class="function">flymake-get-ada-cmdline</span> (source base-dir)\u000a    `(<span class="string">"gnatmake"</span> (<span class="string">"-gnatc"</span> <span class="string">"-gnatwa"</span> ,(concat <span class="string">"-I"</span> (expand-file-name base-dir)) ,source)))</pre><pre>  (push '(<span class="string">".+\u005c\u005c.adb$"</span> flymake-ada-init) flymake-allowed-file-name-masks)\u000a  (push '(<span class="string">".+\u005c\u005c.ads$"</span> flymake-ada-init) flymake-allowed-file-name-masks)</pre><pre>  (push '(<span class="string">"\u005c\u005c([<span class="negation">^</span>:]*\u005c\u005c):\u005c\u005c([0-9]+\u005c\u005c):[0-9]+: \u005c\u005c(.*\u005c\u005c)"</span>\u000a	  1 2 nil 3)\u000a        flymake-err-line-patterns)</pre><h3>Automake</h3><p>When using a moderately complex automake project, the trivial option of adding a <tt>check-syntax</tt> rule on every &#x201c;interesting&#x201d; <tt>Makefile</tt> is no longer enough, as you might have, for example, target-dependant compile flags, as well as files that must be compiled with different compilers.</p><p>Instead, you can create a <tt>flymake.mk</tt> file (defining the <tt>check-syntax</tt> rule) somewhere on your project, and include it on every <tt>Makefile.am</tt> that you want to add syntax check support to:</p><pre>  include $(top_srcdir)/flymake.mk</pre><p>Then, the <tt>flymake.mk</tt> file, would look something like:</p><pre>  get_cs_flags = $(foreach target,$(subst .,_,$(subst -,_,$($(2)))),$($(target)_$(1)FLAGS))\u000a  get_cs_all_flags = $(foreach type,$(2),$(call get_cs_flags,$(1),$(type)))\u000a  get_cs_compile = $(<span class="keyword elisp">if</span> $(subst C,,$(1)),$($(1)COMPILE),$(COMPILE))\u000a  get_cs_cmdline = $(call get_cs_compile,$(1)) $(call get_cs_all_flags,$(1),check_PROGRAMS bin_PROGRAMS lib_LTLIBRARIES) -fsyntax-only</pre><pre>  check-syntax:\u000a  	s=$(suffix $(CHK_SOURCES))<span class="comment">;\u005c</span>\u000a  	if   [ <span class="string">"$$s"</span> = <span class="string">".c"</span>   ]<span class="comment">; then $(call get_cs_cmdline,C)	 $(CHK_SOURCES);\u005c</span>\u000a  	elif [ <span class="string">"$$s"</span> = <span class="string">".cpp"</span> ]<span class="comment">; then $(call get_cs_cmdline,CXX) $(CHK_SOURCES);\u005c</span>\u000a  	else exit 1<span class="comment">; fi</span></pre><pre>  .PHONY: check-syntax</pre><ul><li><em>Note</em>: I&#x2019;ve only added support for checking the syntax on C and C++ files, but others should be similarly handled.</li><li><em>Warning</em>: This will only work for files that are compiled using the automake-provided compilation rules.</li><li><em>Warning</em>: This only includes the compiler flags. So if you are passing include directories with CPPFLAGS (i.e. foo_CPPFLAGS=-I $pathToIncludeDir) you need to replace for example the line <em>&#x201c;elif [ &#x201c;$$s&#x201d; = &#x201c;.cpp&#x201d; ]; then $(call get_cs_cmdline,CXX) $(CHK_SOURCES);\u005c&#x201d;</em> by   <em>&#x201c;elif [ &#x201c;$$s&#x201d; = &#x201c;.cpp&#x201d; ]; then $(call get_cs_cmdline,CXX) $(call get_cs_cmdline,CPP) $(CHK_SOURCES);\u005c&#x201d;</em>.</li></ul><p>&#x2013; <a class="local" href="https://www.emacswiki.org/emacs/Llu%c3%83">LluÃ</a>­s</p><p>If your build directory is in a different location from your project directory, you&#x2019;ll need to tell flymake where to find your Makefiles. I use this: </p><pre>(<span class="keyword">defadvice</span> <span class="function">flymake-find-buildfile</span>\u000a  (around advice-find-makefile-separate-obj-dir\u000a	  activate compile)\u000a  <span class="string">"Look for buildfile in a separate build directory"</span>\u000a  (<span class="keyword elisp">let</span>* ((source-dir (ad-get-arg 1))\u000a	 (bld-dir (ac-build-dir source-dir)))\u000a    (ad-set-arg 1 bld-dir)\u000a    ad-do-it))\u000a\u000a(<span class="keyword">defun</span> <span class="function">ac-find-configure</span> (source-dir)\u000a  (locate-dominating-file source-dir <span class="string">"configure"</span>))\u000a\u000a(<span class="keyword">defvar</span> <span class="variable">project-build-root</span> nil\u000a  <span class="string">"top build directory of the project"</span>)\u000a\u000a(<span class="keyword">defun</span> <span class="function">ac-build-dir</span> (source-dir)\u000a  <span class="string">"find the build directory for the given source directory"</span>\u000a  (<span class="keyword elisp">condition-case</span> nil\u000a      (<span class="keyword elisp">let</span>* ((topdir (ac-find-configure source-dir))\u000a	     (subdir (file-relative-name (file-name-directory source-dir) topdir))\u000a	     (blddir (concat (file-name-as-directory project-build-root) subdir)))\u000a	blddir)\u000a    (<span class="warning">error</span> source-dir)))\u000a</pre><p>and set <code>project-build-root</code> in my top-level source directory&#x2019;s <code>.dir-locals.el</code></p><p>-brendan</p><h3>SCons/bjam</h3><div class="color one level0"><p> Can Flymake work if SCons/bjam is used instead of make? &#x2013; Tennis</p></div><div class="color two level0"><p> By providing a makefile which invokes SCons/bjam. Not perfect but a viable alternative until Flymake has more configuration options</p><p>Here is how I customized flymake to compile with scons :</p><pre>	(<span class="keyword">defun</span> <span class="function">flymake-get-make-cmdline</span> (source base-dir)\u000a	  (string-match <span class="string">"src/\u005c\u005c(.*\u005c\u005c)\u005c\u005c."</span> source)\u000a	  (list <span class="string">"scons"</span>\u000a	    (list <span class="string">"-u"</span> \u000a	          (concat <span class="string">"#obj/"</span> \u000a	                  (match-string 1 source)\u000a	                  <span class="string">".o"</span>))))</pre><p>This is the case if you put <a class="local" href="https://www.emacswiki.org/emacs/VariantDir">VariantDir</a>(obj,src) in your SConstruct.</p><p>&#x2013; Ounim</p></div><h3>CMake</h3><p>Using flymake for CMake is not difficult, the trick is to generate Makefiles using information provided by cmake. This <a class="url http outside" href="http://www.opencog.org/wiki/Flymake_help">page</a> contains explanation and scripts to do that. It is possible the provided scripts would work immediately for your CMake project, if not you will surely get the idea.</p><p>&#x2013; Nil Geisweiller</p><div class="color one level0"><p> Nil&#x2019;s scripts didn&#x2019;t work for me out of the box, so I&#x2019;ve modified them to generate the correct Makefiles. You can <a class="url http outside" href="https://github.com/seanfisk/cmake-flymake">find my modified scripts on GitHub</a>.</p><p>&#x2013; <a class="local" href="https://www.emacswiki.org/emacs/SeanFisk">SeanFisk</a></p><p>Please use <a href="https://github.com/redguardtoo/cpputils-cmake" class="url http outside">cpputils-cmake</a>. It is a pure Elisp plugin actively maintained since year 2012.</p><p>&#x2013; Chen Bin</p><p>There&#x2019;s another trick. Right before loading flymake mode (M-x flymake-mode), open ielm (M-x ielm) and add the following line</p><p>(defun flymake-simple-make-init () (list &#x201c;make&#x201d; (list &#x201c;-C&#x201d; MY_CMAKE_BUILD_DIR)))</p><p>where MY_CMAKE_BUILD_DIR is the root of the build directory of your project. For faster flymake you can even take the build dir corresponding to the file. Note that with that trick you need to save your file to activate flymake (it actually gets activated anyway when you type but on the old unsaved file, so the errors aren&#x2019;t reported in your buffer).</p><p>I think having to save the file is acceptable, besides it provides an advantage, what you compile for flymake is not wasted, basically when you are done with your coding, chances are that you code is already compiled.</p><p>An improvement of that would be to write a elisp function that look for the right build dir automatically.</p><p>&#x2013; Nil Geisweiller</p><p>I&#x2019;ve made a CMake minor-mode, <a href="https://github.com/alamaison/emacs-cmake-project" class="url http outside">cmake-project</a>, that fixes up Flymake to support builds via CMake. If anything doesn&#x2019;t work as it should or there are features you would like, please <a class="url http outside" href="https://github.com/alamaison/emacs-cmake-project/issues">report a new issue</a>.</p><p>&#x2013; <a href="https://www.emacswiki.org/emacs/AlexanderLamaison" class="local">AlexanderLamaison</a></p></div><h3>Mozart/Oz</h3><p>Here are instructions how to make flymake work with Mozart/Oz: <a class="url http" href="http://code.google.com/p/oz-code/downloads/list">http://code.google.com/p/oz-code/downloads/list</a></p><p>&#x2013; <a href="https://www.emacswiki.org/emacs/WolfgangMeyer" class="local">WolfgangMeyer</a></p><h3>XSL-Mode</h3><p>Use Flymake&#x2019;s XML syntax-checking on files with a .xsl extension.</p><pre>    (<span class="keyword">require</span> '<span class="constant">flymake</span>)\u000a    (push '(<span class="string">".+\u005c\u005c.xsl$"</span> flymake-xml-init) flymake-allowed-file-name-masks)\u000a    (add-hook 'xsl-mode-hook\u000a	      (<span class="keyword elisp">lambda</span> () (flymake-mode t)))</pre><h3>JavaScript with Google Closure</h3><p>1. Download the Google Closure compiler and unzip (<a class="url http" href="http://dl.google.com/closure-compiler/compiler-latest.zip">http://dl.google.com/closure-compiler/compiler-latest.zip</a>). 2. Create a shell script to run closure on a file. I called mine &#x201c;closure.sh&#x201d;: </p><pre>java -jar ~/bin/compiler.jar --warning_level VERBOSE --js $1 --js_output_file /dev/null\u000a</pre><p>3. Add the following to your .emacs file (change closure.sh path to match your system): </p><pre>(<span class="keyword cl">when</span> (load <span class="string">"flymake"</span> t)\u000a  (<span class="keyword">defun</span> <span class="function">flymake-closure-init</span> ()\u000a    (<span class="keyword elisp">let</span>* ((temp-file (flymake-init-create-temp-buffer-copy\u000a		       'flymake-create-temp-inplace))\u000a           (local-file (file-relative-name\u000a                        temp-file\u000a                        (file-name-directory buffer-file-name))))\u000a      (list <span class="string">"~/bin/closure.sh"</span> (list local-file))))\u000a    \u000a  (add-to-list 'flymake-allowed-file-name-masks\u000a               '(<span class="string">"\u005c\u005c.js\u005c\u005c'"</span> flymake-closure-init)))\u000a</pre><p>1. Don&#x2019;t forget to start flymake mode by adding (flymake-mode t) to your javascript mode hook.</p><h3>RFringe: Display the number and location of flymake errors/warnings on the fringe</h3><p>See <a class="url http outside" href="http://www.emacswiki.org/emacs/RFringe">rfringe.el</a> to display the buffer-relative positions of flymake errors and warnings on the fringe . This works with any language. Just add this to your .emacs:</p><pre>    (<span class="keyword">require</span> '<span class="constant">rfringe</span>)\u000a  </pre><p>Example appearance:</p><p><img src="http://i.imgur.com/34ceS.png" alt="http://i.imgur.com/34ceS.png" class="url http" /></p><h3>flymake-cursor.el : Display flymake messages in the minibuffer</h3><p><a class="local" href="https://www.emacswiki.org/emacs/FlymakeCursor">FlymakeCursor</a> automatically displays the flymake error for the current line in the minibuffer. The default flymake behavior is to display the message on mouse hover, so the <a href="https://www.emacswiki.org/emacs/FlymakeCursor" class="local">FlymakeCursor</a> thing is nice for keyboard jockeys and those who use nox / no-window. It works with any language. Just require it, and it works.</p><p>Example:</p><p><img alt="http://i.imgur.com/CK6kg.png" class="url http" src="http://i.imgur.com/CK6kg.png" /></p><p>Note the highlights, and the error message for the current line, shown beneath the modeline.</p><h2>More Tips and Questions</h2><h3>Wine build system</h3><p>It works really well! You need some makefile magic though, this is what I used for the Wine build system:</p><pre>check-syntax:\u000a	$(MAKE) syntax-target SYNTAX=<span class="string">"-fsyntax-only"</span>\u000a\u000asyntax-target: $(SOURCES:.c=.o)\u000a</pre><p>-<a href="https://www.emacswiki.org/emacs/MikeHearn" class="local">MikeHearn</a></p><div class="color one level0"><p> In my simple project I use the following target in the Makefile:</p><pre>.PHONY: check-syntax\u000acheck-syntax:\u000a	$(CXX) -Wall -Wextra -pedantic -fsyntax-only $(CHK_SOURCES)\u000a</pre><p>This works out-of-the-box with GNU Emacs 22.0.90.</p></div><h3>Using temp dir</h3><p>Does anybody know how to change flymake so that it sticks all of its junk files (*_flymake.*) in /tmp?</p><p>For example, you&#x2019;re editing the source to a folder which you do not have write permissions on. Flymake breaks because it cannot save the _flymake file to the same directory as the source. Plus this leads to ugly _flymake files all over the place if it fails to delete them.</p><div class="color one level0"><p> I use the trick documented in <a class="url http outside" href="http://blog.urth.org/2011/06/flymake-versus-the-catalyst-restarter.html">this blog</a> to make temporary copies in my <code>~/.emacs.d/tmp</code> dir, I&#x2019;ve also integrated this tweak and others into a patched version of <a href="https://www.emacswiki.org/emacs/FlyMake" class="local">FlyMake</a> available at <a class="url http" href="https://github.com/illusori/emacs-flymake">https://github.com/illusori/emacs-flymake</a> which may be easier to install. &#x2013; <a class="local" href="https://www.emacswiki.org/emacs/SamGraham">SamGraham</a></p></div><div class="color two level0"><p>I use the following hook so flymake can write temporary files, but if it can&#x2019;t, it just doesn&#x2019;t activate and gives a minor warning to the user.</p><pre>(<span class="keyword">defun</span> <span class="function">cwebber/safer-flymake-find-file-hook</span> ()\u000a  <span class="string">"Don't barf if we can't open this flymake file"</span>\u000a  (<span class="keyword elisp">let</span> ((flymake-filename\u000a         (flymake-create-temp-inplace (buffer-file-name) <span class="string">"flymake"</span>)))\u000a    (<span class="keyword elisp">if</span> (file-writable-p flymake-filename)\u000a        (flymake-find-file-hook)\u000a      (message\u000a       (format\u000a        <span class="string">"Couldn't enable flymake<span class="comment">; permission denied on %s"</span> flymake-filename)))))</span>\u000a\u000a(add-hook 'find-file-hook 'cwebber/safer-flymake-find-file-hook)\u000a</pre><p>&#x2013; <a href="https://www.emacswiki.org/emacs/ChrisWebber" class="local">ChrisWebber</a></p></div><h3>Resource consumption?</h3><p>What about resource consumption ? Does it eat all the CPU or RAM ? How Emacs is running when this is activated ? Except these questions, it really seems a killer-app &#x1F60A; &#x2013; <a class="local" href="https://www.emacswiki.org/emacs/XavierMaillard">XavierMaillard</a></p><div class="color one level0"><p> RAM use is negligible, CPU consumption in the current version can be excessive if you have several hundred buffers open in flymake-mode as it creates a timer for every buffer, I have a patched version at <a href="https://github.com/illusori/emacs-flymake" class="url http">https://github.com/illusori/emacs-flymake</a> that addresses this issue. &#x2013; <a class="local" href="https://www.emacswiki.org/emacs/SamGraham">SamGraham</a></p></div><h3>When is flymake run?</h3><p>I&#x2019;ve tried it (linux, stock emacs).. GREAT.. but.. I found that the buffer is only updated after I save the buffer, even if flymake is running gcc very often&#x2026; is it normal?</p><dl class="quote"><dt /><dd>No, it is supposed to run automatically &#x2013; <a href="https://www.emacswiki.org/emacs/VagnJohansen" class="local">VagnJohansen</a></dd><dt /><dd>Re: &#x201c;the buffer is only updated&#x2026;&#x201d; Yes, if you are speaking about saving the buffer to its backing file, it is normal. Flymake saves the buffer to a temp file, then compiles <b>that</b>. The real file that backs your edited buffer doesn&#x2019;t get saved until you explicitly save it. &#x2013; <a class="local" href="https://www.emacswiki.org/emacs/DinoChiesa">DinoChiesa</a></dd></dl><h3>Underline errors instead of highlight</h3><p>add this lines in .emacs</p><pre>(custom-set-faces\u000a '(flymake-errline ((((class color)) (<span class="builtin">:underline</span> <span class="string">"red"</span>))))\u000a '(flymake-warnline ((((class color)) (<span class="builtin">:underline</span> <span class="string">"yellow"</span>)))))\u000a</pre><h3>Using CEDET tools for unsupported modes</h3><p>If you have a mode that flymake does not support (and you can&#x2019;t/won&#x2019;t add flymake support for it), then you can use lmcompile.el/linemark.el from the CEDET tools (<a class="local" href="https://www.emacswiki.org/emacs/CollectionOfEmacsDevelopmentEnvironmentTools">CollectionOfEmacsDevelopmentEnvironmentTools</a>) to at least get automatic highlighting after compiles.</p><p>Assuming that cedet is properly configured you can use</p><pre>  (<span class="keyword">require</span> '<span class="constant">lmcompile</span>)\u000a  (add-hook 'compilation-finish-functions 'vj-compilation-finish-highlight)\u000a  (<span class="keyword">defun</span> <span class="function">vj-compilation-finish-highlight</span> (buffer result-str)\u000a    (interactive)\u000a    (lmcompile-do-highlight))\u000a</pre><p>On my system the lmcompile-do-highligth call changes point to the last highlight entry (bug?). I had to use a delayed call:</p><pre>(<span class="keyword">defun</span> <span class="function">vj-compilation-finish-highlight</span> (buffer result-str)\u000a  (interactive)\u000a  (run-at-time <span class="string">"1 sec"</span> nil 'lmcompile-do-highlight))\u000a</pre><p>&#x2013; <a class="local" href="https://www.emacswiki.org/emacs/VagnJohansen">VagnJohansen</a></p><h3>Showing error messages in without a mouse</h3><p>If you do not want to use mouse hover to check out the error messages, I&#x2019;ve made a small modification that puts them in as overlays <a class="url http number" href="http://graphics.tudelft.nl/~jorik/css/flymake.html"><span><span class="bracket">[</span>1<span class="bracket">]</span></span></a>. You may need to patch it a bit to get it to run though.</p><p>&#x2013; <a href="https://www.emacswiki.org/emacs/JorikBlaas" class="local">JorikBlaas</a></p><div class="color one level0"><p>Jorik, you can use <a class="local" href="https://www.emacswiki.org/emacs/FlymakeCursor">FlymakeCursor</a> to address that. --<a class="local" href="https://www.emacswiki.org/emacs/DinoChiesa">DinoChiesa</a></p></div><h3>Quickly show next err-menu</h3><pre>  <span class="comment">;; flymake</span>\u000a  (<span class="keyword">defun</span> <span class="function">my-flymake-show-next-error</span>()\u000a    (interactive)\u000a    (flymake-goto-next-error)\u000a    (flymake-display-err-menu-for-current-line)\u000a    )</pre><pre>  (local-set-key <span class="string">"\u005cC-c\u005cC-v"</span> 'my-flymake-show-next-error)</pre><div class="color one level0"><p> Similarly, I like to have M-n and M-p move the point to the next and previous flymake error and then echo the error message at that point to the mini buffer. The following is a minor mode to achieve that. &#x2013; <a href="https://www.emacswiki.org/emacs/MatthewKennedy" class="local">MatthewKennedy</a></p><pre>(<span class="keyword">defvar</span> <span class="variable">my-flymake-minor-mode-map</span>\u000a  (<span class="keyword elisp">let</span> ((map (make-sparse-keymap)))\u000a    (define-key map <span class="string">"\u005cM-p"</span> 'flymake-goto-prev-error)\u000a    (define-key map <span class="string">"\u005cM-n"</span> 'flymake-goto-next-error)\u000a    map)\u000a  <span class="string">"Keymap for my flymake minor mode."</span>)\u000a\u000a(<span class="keyword">defun</span> <span class="function">my-flymake-err-at</span> (pos)\u000a  (<span class="keyword elisp">let</span> ((overlays (overlays-at pos)))\u000a    (remove nil\u000a            (mapcar (<span class="keyword elisp">lambda</span> (overlay)\u000a                      (and (overlay-get overlay 'flymake-overlay)\u000a                           (overlay-get overlay 'help-echo)))\u000a                    overlays))))\u000a\u000a(<span class="keyword">defun</span> <span class="function">my-flymake-err-echo</span> ()\u000a  (message <span class="string">"%s"</span> (mapconcat 'identity (my-flymake-err-at (point)) <span class="string">"\u005cn"</span>)))\u000a\u000a(<span class="keyword">defadvice</span> <span class="function">flymake-goto-next-error</span> (after display-message activate compile)\u000a  (my-flymake-err-echo))\u000a\u000a(<span class="keyword">defadvice</span> <span class="function">flymake-goto-prev-error</span> (after display-message activate compile)\u000a  (my-flymake-err-echo))\u000a\u000a(<span class="keyword">define-minor-mode</span> <span class="function">my-flymake-minor-mode</span>\u000a  <span class="string">"Simple minor mode which adds some key bindings for moving to the next and previous errors.\u000a\u000aKey bindings:\u000a\u000a\u005c\u005c{my-flymake-minor-mode-map}"</span>\u000a  nil\u000a  nil\u000a  <span class="builtin">:keymap</span> my-flymake-minor-mode-map)\u000a\u000a<span class="comment">;; Enable this keybinding (my-flymake-minor-mode) by default</span>\u000a<span class="comment">;; Added by Hartmut 2011-07-05</span>\u000a(add-hook 'haskell-mode-hook 'my-flymake-minor-mode)\u000a</pre></div><div class="color two level0"><p> To use in console/tty emacs you could try the following:</p><pre>    (<span class="keyword">defun</span> <span class="function">next-flymake-error</span> ()\u000a      (interactive)\u000a      (<span class="keyword elisp">let</span> ((err-buf nil))\u000a        (<span class="keyword elisp">condition-case</span> err\u000a            (setq err-buf (next-error-find-buffer))\u000a          (<span class="warning">error</span>))\u000a        (<span class="keyword elisp">if</span> err-buf\u000a            (next-error)\u000a            (<span class="keyword elisp">progn</span>\u000a              (flymake-goto-next-error)\u000a              (<span class="keyword elisp">let</span> ((err (get-char-property (point) 'help-echo)))\u000a                (<span class="keyword cl">when</span> err\u000a                  (message err)))))))</pre><p>I bind to C-` (for cperl only at the moment) which suits the way I work. If you don&#x2019;t care about the whole next-error thing then something like:</p><pre>    (flymake-goto-next-error)\u000a    (<span class="keyword elisp">let</span> ((err (get-char-property (point) 'help-echo)))\u000a      (<span class="keyword cl">when</span> err\u000a        (message err)))</pre><p>might be all you need. &#x2013; <a class="local" href="https://www.emacswiki.org/emacs/PhilJackson">PhilJackson</a></p></div><div class="color one level0"><p> Another solution worth mentioning made by Nafai can be found at <a class="url http number" href="http://paste.lisp.org/display/60617"><span><span class="bracket">[</span>2<span class="bracket">]</span></span></a>. From the comment to this code: </p><dl class="quote"><dt /><dd>Additional functionality that makes flymake error messages appear</dd><dt /><dd>in the minibuffer when point is on a line containing a flymake</dd><dt /><dd>error. This saves having to mouse over the error, which is a</dd><dt /><dd>keyboard user&#x2019;s annoyance</dd></dl><p><a href="https://www.emacswiki.org/emacs/RichardRiley" class="local">RichardRiley</a>: The solution below was from Dave Love on gnu.emacs.help:-</p><pre>\u000a (<span class="keyword">defun</span> <span class="function">my-flymake-show-help</span> ()\u000a   (<span class="keyword cl">when</span> (get-char-property (point) 'flymake-overlay)\u000a     (<span class="keyword elisp">let</span> ((help (get-char-property (point) 'help-echo)))\u000a       (<span class="keyword elisp">if</span> help (message <span class="string">"%s"</span> help)))))\u000a\u000a (add-hook 'post-command-hook 'my-flymake-show-help)\u000a\u000a</pre></div><div class="color two level0"><p> The above my-flymake-show-help will work, when you cursor very slowly. But let&#x2019;s suppose you hold the arrow key continuously; what happens in that case is everything slows down. Scrolling goes very very slowly. See <a href="http://www.emacswiki.org/emacs/flymake-cursor.el" class="url http">http://www.emacswiki.org/emacs/flymake-cursor.el</a></p></div><div class="color one level0"><p> Something rather similar is used in <a href="https://www.emacswiki.org/emacs/NxhtmlMode" class="local">nXhtml</a> where (colored) flymake errors are shown in the echo area by default when point enters the flymake error marking. nXhtml also adds support for some of the above that are not part of Emacs 23 (like CSS, Javascript and an enhanced version for Java).</p></div><div class="color two level0"><p> Has anyone got this to work with tramp (i.e. for remote files)? I&#x2019;ve seen something on a mailing list (for example at <a href="http://groups.google.com/group/gnu.emacs.help/browse_thread/thread/dda14275ce2b8b02/d58b601f2b3be223" class="url http">http://groups.google.com/group/gnu.emacs.help/browse_thread/thread/dda14275ce2b8b02/d58b601f2b3be223</a>) that says &#x201c;In <code>&#x2018;flymake-start-syntax-check-process&#x2019;</code> of flymake.el, <code>&#x2018;start-process&#x2019;</code> is called. This does not work on remote hosts. Instead of, <code>&#x2018;start-file-process&#x2019;</code> shall be used.&#x201d; but there&#x2019;s no indication a bug report was ever made (AFAICT), what version the problem occured in, or anything useful like that.</p></div><div class="color one level0"><p> The version of <a href="https://www.emacswiki.org/emacs/FlyMake" class="local">FlyMake</a> distributed with Emacs 23 can work with files over tramp but has a few bugs that might crop up resulting in the appending of &#x201c;login messages&#x201d; to the end of the buffer you&#x2019;re editing. My fork of <a href="https://www.emacswiki.org/emacs/FlyMake" class="local">FlyMake</a> at <a href="https://github.com/illusori/emacs-flymake" class="url http">https://github.com/illusori/emacs-flymake</a> patches this with more robust Tramp support. â€“ <a class="local" href="https://www.emacswiki.org/emacs/SamGraham">SamGraham</a></p></div><hr /><p><a class="local" href="https://www.emacswiki.org/emacs/CategoryModes">CategoryModes</a> <a href="https://www.emacswiki.org/emacs/CategoryProgrammerUtils" class="local">CategoryProgrammerUtils</a></p></div><div class="wrapper close"></div></div><div class="footer"><hr /><span class="translation bar"><br />  <a rel="nofollow" href="https://www.emacswiki.org/emacs?action=translate;id=FlyMake;missing=de_es_fr_it_ja_ko_pt_ru_se_uk_zh" class="translation new">Add Translation</a></span><div class="edit bar"><a href="https://www.emacswiki.org/emacs/Comments_on_FlyMake" accesskey="c" class="comment local">Talk</a> <a class="edit" rel="nofollow" href="https://www.emacswiki.org/emacs?action=edit;id=FlyMake" accesskey="e" title="Click to edit this page">Edit this page</a> <a class="history" rel="nofollow" href="https://www.emacswiki.org/emacs?action=history;id=FlyMake">View other revisions</a> <a class="admin" href="https://www.emacswiki.org/emacs?action=admin;id=FlyMake" rel="nofollow">Administration</a></div><div class="time">Last edited 2016-10-11 00:07 UTC by <a class="author" href="https://www.emacswiki.org/emacs/dabrahams" title="17.212.146.102">dabrahams</a> <a rel="nofollow" href="https://www.emacswiki.org/emacs?action=browse;diff=2;id=FlyMake" class="diff">(diff)</a></div><div style="float:right; margin-left:1ex;">\u000a<!-- Creative Commons License -->\u000a<a class="licence" href="https://creativecommons.org/licenses/GPL/2.0/"><img alt="CC-GNU GPL" style="border:none" src="/pics/cc-GPL-a.png" /></a>\u000a<!-- /Creative Commons License -->\u000a</div>\u000a\u000a<!--\u000a<rdf:RDF xmlns="http://web.resource.org/cc/"\u000a xmlns:dc="http://purl.org/dc/elements/1.1/"\u000a xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\u000a<Work rdf:about="">\u000a   <license rdf:resource="https://creativecommons.org/licenses/GPL/2.0/" />\u000a  <dc:type rdf:resource="http://purl.org/dc/dcmitype/Software" />\u000a</Work>\u000a\u000a<License rdf:about="https://creativecommons.org/licenses/GPL/2.0/">\u000a   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />\u000a   <permits rdf:resource="http://web.resource.org/cc/Distribution" />\u000a   <requires rdf:resource="http://web.resource.org/cc/Notice" />\u000a   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />\u000a   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />\u000a   <requires rdf:resource="http://web.resource.org/cc/SourceCode" />\u000a</License>\u000a</rdf:RDF>\u000a-->\u000a\u000a<p class="legal">\u000aThis work is licensed to you under version 2 of the\u000a<a href="https://www.gnu.org/">GNU</a> <a href="/GPL">General Public License</a>.\u000aAlternatively, you may choose to receive this work under any other\u000alicense that grants the right to use, copy, modify, and/or distribute\u000athe work, as long as that license imposes the restriction that\u000aderivative works have to grant the same rights and impose the same\u000arestriction. For example, you may choose to receive this work under\u000athe\u000a<a href="https://www.gnu.org/">GNU</a>\u000a<a href="/FDL">Free Documentation License</a>, the\u000a<a href="https://creativecommons.org/">CreativeCommons</a>\u000a<a href="https://creativecommons.org/licenses/sa/1.0/">ShareAlike</a>\u000aLicense, the XEmacs manual license, or\u000a<a href="/OLD">similar licenses</a>.\u000a</p>\u000a<p class="legal" style="padding-top: 0.5em">Please note our <a href="Privacy">Privacy Statement</a>.</p>\u000a</div>\u000a</body>\u000a</html>\u000a
p3
a.